(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[93892],{683135:e=>{e.exports={"tv-spinner__container-rotate":"tv-spinner__container-rotate-aLqboHuu"}},947040:e=>{e.exports={fade:"fade-zUA5953i",hidden:"hidden-zUA5953i",floatingTooltip:"floatingTooltip-zUA5953i"}},882112:e=>{e.exports={}},685023:(e,t,i)=>{"use strict";i.d(t,{DEFAULT_SIZE:()=>s,spinnerSizeMap:()=>r});const s="large",r={mini:"xsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"}},293659:(e,t,i)=>{"use strict";i.d(t,{MiniChartPlotBase:()=>T,isTimePointIndex:()=>C});var s=i(894065),r=i(712433),o=i(827147),a=i(650151),n=i(724377),l=i(444372),h=i(246733),c=i(66732),d=i(389137),u=i(401580),m=i(707957),_=i(732149),p=i(201089),g=i(919892);const v=(0,p.getLogger)("Chart.MiniChart");function b(e,t,i){return{time:e,color:i,value:t[4]}}function f(e,t){return{time:e,open:t[1],high:t[2],low:t[3],close:t[4]}}function y(e,t,i,s,r){return{time:e,topColor:s,bottomColor:r,lineColor:i,value:t[4]}}function S(e){const t=new Date(e);return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())/1e3}function C(e){return(0,d.isInteger)(e)}const w=["symbol","session","unit-id","currency-id","adjustment","backadjustment","settlement-as-close"];const D={leftLogical:.5,rightLogical:.5,leftPx:0,rightPx:4};class T{constructor(e,t,i){this._symbolChanged=new m.Delegate,this._whitespaces=null,this._symbolResolved=new m.Delegate,this._originalScaleMode=null,this._isDestroyed=new u.WatchedValue(!1),this._status=new u.WatchedValue(0),this._noData=new u.WatchedValue(null),this._directionBasedColor=new u.WatchedValue(null),this._dataLengthInfo=null,this._sessionId=new u.WatchedValue,this._barBuilder=null,this._symbol={symbol:""},this._symbolInfo=null,this._timeFrameInvalidated=new m.Delegate,this._barBuilderPromiseCallbackRef=null,this._firstValueCache=null,this._historyUpdateReceived=!1,this._miniChart=e,this._originalSeriesOptions=t,this._currentSeriesOptions=(0,r.default)({},t),this._horzMargins=(0,r.default)({},D,t.horzMargins),this._series=this._createSeries(),this._originalVolumeOptions=i,this._volume=this._createVolume(),this._timeFrame=e.timeframe().spawn(),this._timeFrame.subscribe(this._updateSessionId.bind(this)),this._isLastSessionInterval=(0,c.combine)((e=>"LASTSESSION"===e.value),this._miniChart.timeframe().weakReference()),this._isLastSessionInterval.subscribe(this._updateSessionId.bind(this))}destroy(){this._status.unsubscribe(),this._timeFrame.destroy(),this._isDestroyed.setValue(!0),this._barBuilderPromiseCallbackRef&&(this._barBuilderPromiseCallbackRef.callback=null),this._isLastSessionInterval.destroy()}status(){return this._status.readonly()}noData(){return this._noData.readonly()}symbolInfo(){return this._symbolInfo}symbol(){return this._symbol.symbol}subSession(){return this._sessionId.value()}setSymbol(e,t){var i,s;(0,o.default)(e)&&(e={...this._symbol,symbol:e}),void 0!==t&&this._updateSeriesOptions(t),i=this._symbol,s=e,w.every((e=>i[e]===s[e]))||(this._symbol=e,
this._barBuilderPromiseCallbackRef&&(this._barBuilderPromiseCallbackRef.callback=null),this._updateSessionId(),this._symbolChanged.fire())}extendedSymbol(){return{...this._symbol,session:this._sessionId.value()}}updateSeriesOptions(e){const t=this._originalSeriesOptions.chartType!==e.chartType;this._updateSeriesOptions(e),t?this._onChartStyleChanged():this._series.applyOptions(e)}updateHorzMargins(e){this._horzMargins=(0,r.default)(this._horzMargins,e),this.fitContent()}symbolResolved(){return this._symbolResolved}symbolChanged(){return this._symbolChanged}timeFrameInvalidated(){return this._timeFrameInvalidated}restoreOriginalScaleMode(){null!==this._originalScaleMode&&this._series.priceScale().applyOptions({mode:this._originalScaleMode})}switchToPercentageScaleMode(){null===this._originalScaleMode&&(this._originalScaleMode=this._series.priceScale().options().mode),this._series.priceScale().applyOptions({mode:s.PriceScaleMode.Percentage})}chartSession(){return this._miniChart.chartSession()}currentSeriesOptions(){return this._currentSeriesOptions}series(){return this._series}volume(){return this._originalVolumeOptions.visible?this._volume:null}updateData(e,t,i){var s;e&&this.clearSourceData();const r=this._originalSeriesOptions,o=this._buildViewData(i),a=o.series.length;if(this._historyUpdateReceived=this._historyUpdateReceived||void 0===i,0===a)return void(void 0===i&&(this._dataLengthInfo=null,this._firstValueCache=null));void 0!==i||"area"!==r.chartType&&"line"!==r.chartType||(this._firstValueCache=o.series[0].value);const n=this._historyUpdateReceived&&null===this._dataLengthInfo;if(void 0!==i&&!n){const e=this._dataLengthInfo;if(null===e)return;const t={...e};e.lastBarSession=o.lastBarSession;let i=!1;for(const t of o.series)this._series.update(t),e.lastBarTime<t.time&&(e.lastBarTime=t.time,e.realtime+=1,e.lastBarIndex+=1,i=!0);if(o.volume)for(const e of o.volume)this._volume.update(e);if(void 0!==this._whitespacesData&&i){const t=this._whitespacesData.findIndex((t=>t.time>e.lastBarTime));-1===t?(e.whitespaces=0,this._updateWhitespaces([])):0!==t&&(e.whitespaces-=t,this._updateWhitespaces(this._whitespacesData.slice(t)))}return i&&(void 0!==e.fixLeftEdgeUntil?(this._isMainPlot()&&e.fixLeftEdgeUntil>=e.lastBarTime&&this.fitContent(),e.lastBarTime>e.fixLeftEdgeUntil&&(e.history+=e.realtime-1,e.realtime=0,e.fixLeftEdgeUntil=void 0,e.timeFrameInvalidated=!0,this._timeFrameInvalidated.fire())):e.timeFrameInvalidated||(e.timeFrameInvalidated=!0,this._timeFrameInvalidated.fire())),this._updateSeriesColor(o.series[o.series.length-1]),void this._dataUpdated(o,e,t)}const l=o.whitespaces,h=null!==(s=null==l?void 0:l.length)&&void 0!==s?s:0;this._dataLengthInfo={history:a,realtime:0,lastBarIndex:a-1,lastBarTime:o.series[o.series.length-1].time,whitespaces:h,fixLeftEdgeUntil:o.fixLeftEdgeUntil,timeFrameInvalidated:!1,lastBarSession:o.lastBarSession},this._updateSeriesColor(o.series[o.series.length-1]),this._series.applyOptions(this._currentSeriesOptions),this._applyPriceScaleFormatter(),t||this._beforeDataReady(),
this._series.setData(o.series),o.volume&&this._volume.setData(o.volume),this._updateWhitespaces(o.whitespaces),this._dataUpdated(o,this._dataLengthInfo),this._isMainPlot()&&this._miniChart.resizeByContainer()}fitContent(){if(null===this._dataLengthInfo||0===this._dataLengthInfo.history)return;const{history:e,realtime:t,whitespaces:i,lastBarTime:s,fixLeftEdgeUntil:r=0}=this._dataLengthInfo,o=this._miniChart.widget(),a=o.options().width;if(0===a)return;const n=a-o.priceScale("left").width()-o.priceScale("right").width(),{leftLogical:l,rightLogical:h,leftPx:c,rightPx:d}=this._horzMargins;let u=l-(r>=s?0:t),m=e-h+i+t;if(0!==c){u-=c/((n-c)/(m-u+1))}if(0!==d){m+=d/((n-d)/(m-u+1))}m=Math.max(u,m),o.timeScale().setVisibleLogicalRange({from:u,to:m}),o.timeScale().applyOptions({lockVisibleTimeRangeOnResize:!0})}deleteView(){var e;this._series.setData([]),null===(e=this._whitespaces)||void 0===e||e.setData([]),this._volume.setData([])}clearData(){this._symbolInfo=null,this._historyUpdateReceived=!1,this._dataLengthInfo=null,this._firstValueCache=null,this._status.setValue(0),this._noData.setValue(null),this._directionBasedColor.setValue(null)}resolution(){return this._miniChart.resolution()}forcePercentageMode(){return!1}lastBarTime(){var e;return null===(e=this._dataLengthInfo)||void 0===e?void 0:e.lastBarTime}getViewData(e){return this._buildViewData(e)}isDestroyed(){return this._isDestroyed.readonly()}_isMainPlot(){return!1}_onChartStyleChanged(){this._recreateSeries(),3===this._status.value()&&this.updateData(!1,!0)}_beforeDataReady(){}_dataUpdated(e,t,i){}_onSymbolResolved(e){this._symbolInfo=e,this._symbolResolved.fire(this._symbolInfo)}_getViewData(e,t){const i=[],s={series:[],volume:i};let r=-1/0;const o=this._bars();if(o.isEmpty())return s;const n=(0,a.ensureNotNull)(this.minBarIndex()),l=null!=t?t:C(n)?n:o.firstIndex(),h=o.lastIndex();if(null===l||null===h)return s;let c;const{premarketLineColor:d,postmarketLineColor:u,premarketTopColor:m,premarketBottomColor:p,postmarketTopColor:g,postmarketBottomColor:b}=this._getPrePostMarketColors();if(o.range(l,h).each(((t,o)=>{if(t<=_.UNPLOTTABLE_TIME_POINT_INDEX)return!1;const a=this._miniChart.indexToTime(t);if(null===a)return v.logWarn(`Couldn't find time for index ${t}`),!1;const n=S(1e3*a);if(n<=r)return!1;r=n,c=n;const l=this._barIndexSession(t);s.lastBarSession=l,s.series.push(e(n,o,...(e=>{switch(e){case 0:return[d,m,p];case 1:return[u,g,b];default:return[]}})(l)));const h=o[4]>=o[1]?this._originalVolumeOptions.upColor:this._originalVolumeOptions.downColor;return i.push({time:n,value:o[5],color:h}),!1})),this._isMainPlot()&&void 0===t&&void 0!==c)switch(this._timeFrame.value().value){case"1D":s.fixLeftEdgeUntil=c+86400-1;break;case"LASTSESSION":{const e=this.maxBarIndex();if(null!==e&&e>h){let t=[],i=c;if(this._barBuilder){const e=this._generateWhiteSpacesByBuilder(this._barBuilder);if(!(null==e?void 0:e.length))break;t=e}else{this._barBuilderPromiseCallbackRef&&(this._barBuilderPromiseCallbackRef.callback=null);const s=this._barBuilderPromiseCallbackRef={callback:e=>{
const t=this._generateWhiteSpacesByBuilder(e);(null==t?void 0:t.length)&&(this._dataLengthInfo&&(this._dataLengthInfo.fixLeftEdgeUntil=t[t.length-1].time),this._updateWhitespaces(t),this.fitContent())}};this._initBarBuilder((0,a.ensureNotNull)(this.symbolInfo())).then((e=>{var t;return null===(t=s.callback)||void 0===t?void 0:t.call(s,e)}));for(let s=h+1;s<=e;s++)i+=60,t.push({time:i})}s.whitespaces=t,s.fixLeftEdgeUntil=t.length>0?t[t.length-1].time:0}}}return s}_buildViewData(e){switch(this._originalSeriesOptions.chartType){case"histogram":{const e=this._currentSeriesOptions;return this._getViewData(((t,i)=>function(e,t,i,s){const r=t[4];return{time:e,color:r>0?i:s,value:r}}(t,i,e.upColor,e.downColor)))}case"line":return this._getViewData(b,e);case"area":return this._getViewData(y,e);case"bars":case"candlesticks":return this._getViewData(f,e)}}_barIndexSession(e){}_onSymbolError(e){v.logWarn((0,g.encodeExtendedSymbolOrGetSimpleSymbolString)(this._symbol)+" symbol resolving error: "+e),this.updateData(!0),this._status.setValue(1)}_onSymbolNotPermitted(){this._noData.setValue(1)}_onSymbolGroupNotPermitted(){this._noData.setValue(1)}_onSymbolInvalid(){this._noData.setValue(0)}_onResolutionOrExchangeNotPermittedError(){v.logError((0,g.encodeExtendedSymbolOrGetSimpleSymbolString)(this._symbol)+" resolution or exchange permission error"),this.updateData(!0),this._isMainPlot()&&this._miniChart.showMessage(l.t(null,void 0,i(467093))),setTimeout((()=>this._miniChart.updateAvailableTimeframes()),1e3)}_onDataError(){1!==this._status.value()&&this._status.setValue(2),this._noData.setValue(3)}_onDataCompleted(){this._status.setValue(3),this._noData.setValue(0===this._bars().size()?2:null),2===this._noData.value()&&this._isMainPlot()&&this._miniChart.showMessage(l.t(null,void 0,i(180526)))}_onData(e){null!==this.minBarIndex()&&null!==this.maxBarIndex()&&this.updateData(!1,void 0,e)}_updateSeriesOptions(e){this._originalSeriesOptions=(0,r.default)(this._originalSeriesOptions,e),this._currentSeriesOptions=(0,r.default)(this._currentSeriesOptions,this._originalSeriesOptions),this._updateSeriesColor(),e.horzMargins&&this.updateHorzMargins(e.horzMargins)}_recreateSeries(){const e=this._miniChart.widget();e.removeSeries(this._series),e.removeSeries(this._volume),this._whitespaces&&(e.removeSeries(this._whitespaces),this._whitespaces=null),this._series=this._createSeries(),this._volume=this._createVolume()}async _initBarBuilder(e){const{LightweightMiniChartBarBuilder:t}=await Promise.all([i.e(83433),i.e(44031),i.e(47944),i.e(96003)]).then(i.bind(i,397796));return this._barBuilder=new t(e)}_createSeries(){const e=this._miniChart.widget();let t;switch(this._currentSeriesOptions.chartType){case"line":t=e.addLineSeries(this._currentSeriesOptions);break;case"histogram":t=e.addHistogramSeries(this._currentSeriesOptions);break;case"area":t=e.addAreaSeries(this._currentSeriesOptions);break;case"bars":t=e.addBarSeries(this._currentSeriesOptions);break;case"candlesticks":t=e.addCandlestickSeries(this._currentSeriesOptions)}
return null===this._originalScaleMode&&(this._originalScaleMode=t.priceScale().options().mode),t.priceScale().applyOptions({scaleMargins:this._currentSeriesOptions.scaleMargins}),t}_createVolume(){const e=this._miniChart.widget().addHistogramSeries(this._originalVolumeOptions);return e.priceScale().applyOptions({scaleMargins:this._originalVolumeOptions.scaleMargins}),e}_updateSeriesColor(e){if(null===this._firstValueCache)return;const t=this._originalSeriesOptions,i=t.chartType;if("line"===i||"area"===i){e=null!=e?e:(0,a.ensureNotNull)(this._series.dataByIndex((0,a.ensureNotNull)(this._dataLengthInfo).lastBarIndex));const s="line"===i?e.value>=this._firstValueCache:e.value>this._firstValueCache;if("area"===i){const e=this._currentSeriesOptions;s?(e.lineColor=t.growingLineColor||t.lineColor,e.topColor=t.growingTopColor||t.topColor,e.bottomColor=t.growingBottomColor||t.bottomColor):(e.lineColor=t.fallingLineColor||t.lineColor,e.topColor=t.fallingTopColor||t.topColor,e.bottomColor=t.fallingBottomColor||t.bottomColor),e.lineColor||(e.lineColor=this._series.options().lineColor),this._series.applyOptions({topColor:e.topColor,bottomColor:e.bottomColor,lineColor:e.lineColor}),this._directionBasedColor.setValue(e.lineColor)}else if("line"===i){const{color:e,growingColor:i=e,fallingColor:r=e}=t,o=this._currentSeriesOptions;o.color=s?i:r,o.color||(o.color=this._series.options().color),this._series.applyOptions({color:o.color}),this._directionBasedColor.setValue(o.color)}}}_applyPriceScaleFormatter(){const e=(0,a.ensureNotNull)(this._symbolInfo);if("volume"===e.format)this._currentSeriesOptions.priceFormat={type:"volume",precision:2,minMove:e.minmov/e.pricescale};else{let t=e.pricescale,i=0;for(;t>1;)t/=10,i+=1;this._currentSeriesOptions.priceFormat={type:"price",precision:i,minMove:e.minmov/e.pricescale}}this._series.applyOptions(this._currentSeriesOptions)}_updateSessionId(){this._sessionId.setValue(this._isLastSessionInterval.value()?"extended":this._symbol.session)}_updateWhitespaces(e){void 0===e||0===e.length?null!==this._whitespaces&&(this._miniChart.widget().removeSeries(this._whitespaces),this._whitespaces=null):(null===this._whitespaces&&(this._whitespaces=this._miniChart.widget().addLineSeries()),this._whitespacesData=null===this._whitespaces?void 0:e,this._whitespaces.setData(e))}_generateWhiteSpacesByBuilder(e){const t=this.symbolInfo(),i=this._bars().lastIndex(),s=this.maxBarIndex();if(t&&i&&s&&i<s&&this._isLastSessionInterval.value()){const s=this._miniChart.indexToTime(i);if(null===s)return;return e.update(t),e.extrapolateBarsFrontToTime(this.resolution(),1e3*s).map((e=>({time:S(e)})))}}_getPrePostMarketColors(){if(!this._isMainPlot())return{};let e,t,i,s;const r=this._originalSeriesOptions.premarketLineColor,o=this._originalSeriesOptions.postmarketLineColor;if("area"===this._originalSeriesOptions.chartType&&r&&o){const a=this._currentSeriesOptions,l=a.growingTopColor||a.fallingTopColor||a.topColor;if(void 0!==l){const t=(0,n.tryParseRgba)(l);if(null!==t){const s=t[3];e=(0,h.applyAlpha)(r,s),i=(0,
h.applyAlpha)(o,s)}}const c=a.growingBottomColor||a.fallingBottomColor||a.bottomColor;if(void 0!==c){const e=(0,n.tryParseRgba)(c);if(null!==e){const i=e[3];t=(0,h.applyAlpha)(r,i),s=(0,h.applyAlpha)(o,i)}}}return{premarketLineColor:r,postmarketLineColor:o,premarketTopColor:e,postmarketTopColor:i,premarketBottomColor:t,postmarketBottomColor:s}}}},195317:(e,t,i)=>{"use strict";i.d(t,{MiniChartPlot:()=>n});var s=i(650151),r=i(534741),o=i(175878),a=i(293659);class n extends a.MiniChartPlotBase{constructor(e,t,i,s,r){super(e,t,i),this._seriesDataSource=null,this._minBarIndex=null,this._maxBarIndex=null,this._studyPlots=s,this._options=r}requestData(){const e=this._getSeriesDataSource();this._minBarIndex=null,this._maxBarIndex=null,this._status.setValue(0),this._noData.setValue(null),e.modifySeries(this.extendedSymbol(),this.resolution(),this._miniChart.timeframe().value()),e.isStarted()||e.start()}clearSourceData(){var e;null===(e=this._seriesDataSource)||void 0===e||e.clearData(),this._studyPlots().forEach((e=>e.clearSourceData()))}moveSourceData(e){var t;null===(t=this._seriesDataSource)||void 0===t||t.moveData(e)}disconnect(){var e;null===(e=this._seriesDataSource)||void 0===e||e.stop()}clearData(){super.clearData(),this._minBarIndex=null,this._maxBarIndex=null,null!==this._seriesDataSource&&(this._seriesDataSource.stop(),this.clearSourceData())}seriesDataSource(){return this._getSeriesDataSource()}firstBar(){return(0,a.isTimePointIndex)(this._minBarIndex)?this._bars().search(this._minBarIndex):this._bars().first()}lastBar(){return(0,a.isTimePointIndex)(this._maxBarIndex)?this._bars().search(this._maxBarIndex,r.PlotRowSearchMode.NearestLeft):this._bars().last()}minBarIndex(){return this._minBarIndex}maxBarIndex(){return this._maxBarIndex}_isMainPlot(){return!0}_dataUpdated(e,t,i){if(super._dataUpdated(e,t,i),!this._isLastSessionInterval.value()||!this._miniChart.supportRealtimeUpdates()||!i)return;const s=i.lastBarSession;0!==s&&1!==s||2!==t.lastBarSession||Promise.resolve().then((()=>{this._miniChart.setTimeframe(this._miniChart.timeframe().value(),!1,!0)}))}_onChartStyleChanged(){(0,s.assert)(0===this._studyPlots().length,"Dynamic style change is not supported if there are additional plots"),super._onChartStyleChanged()}_beforeDataReady(){this._studyPlots().forEach((e=>e.deleteView()))}_subscribeToSeriesDataSourceEvents(e){const t=e.dataEvents();t.symbolResolved().subscribe(this,this._onSymbolResolved),t.symbolNotPermitted().subscribe(this,this._onSymbolNotPermitted),t.symbolGroupNotPermitted().subscribe(this,this._onSymbolGroupNotPermitted),t.symbolInvalid().subscribe(this,this._onSymbolInvalid),t.symbolError().subscribe(this,this._onSymbolError),t.intradayExchangeNotPermitted().subscribe(this,this._onResolutionOrExchangeNotPermittedError),t.customIntervalNotPermitted().subscribe(this,this._onResolutionOrExchangeNotPermittedError),t.completed().subscribe(this,this._onDataCompleted),t.seriesError().subscribe(this,this._onDataError),t.seriesTimeFrame().subscribe(this,this._onTimeFrame),
t.dataUpdated().subscribe(this,this._onDataInternal),t.created().subscribe(null,(()=>performance.mark("RFD",{detail:"Request first data"})),!0),t.dataUpdated().subscribe(null,(()=>{performance.mark("FDR",{detail:"First data response"}),performance.measure("Response idle","RFD","FDR")}),!0)}_unsubscribeFromSeriesDataSourceEvents(e){const t=e.dataEvents();t.symbolResolved().unsubscribe(this,this._onSymbolResolved),t.symbolNotPermitted().unsubscribe(this,this._onSymbolNotPermitted),t.symbolGroupNotPermitted().unsubscribe(this,this._onSymbolGroupNotPermitted),t.symbolInvalid().unsubscribe(this,this._onSymbolInvalid),t.symbolError().unsubscribe(this,this._onSymbolError),t.intradayExchangeNotPermitted().unsubscribe(this,this._onResolutionOrExchangeNotPermittedError),t.customIntervalNotPermitted().unsubscribe(this,this._onResolutionOrExchangeNotPermittedError),t.completed().unsubscribe(this,this._onDataCompleted),t.seriesError().unsubscribe(this,this._onDataError),t.seriesTimeFrame().unsubscribe(this,this._onTimeFrame),t.dataUpdated().unsubscribe(this,this._onDataInternal)}_getSeriesDataSource(){return null===this._seriesDataSource&&(this._seriesDataSource=new o.SeriesDataSource(this.chartSession(),"s"),this._subscribeToSeriesDataSourceEvents(this._seriesDataSource)),this._seriesDataSource}_bars(){return this._getSeriesDataSource().data().bars()}_onTimeFrame(e,t){this._minBarIndex=e,this._maxBarIndex=t,this.updateData(!1),this._studyPlots().forEach((e=>e.updateData(!1,!0)))}_onDataInternal(e,t,i){this._onData(t||null==i?void 0:i.index)}}},668616:(e,t,i)=>{"use strict";i.d(t,{LightweightMiniChart:()=>W});var s=i(894065),r=i(712433),o=i(448874),a=i(650151),n=i(987088),l=i(444372),h=i(201089),c=i(986738),d=i(208817),u=i(223699),m=i(246733),_=i(941285),p=i(157954),g=i(943994),v=i(714688),b=i(464539),f=i(195317),y=i(401580),S=i(938550),C=i(947040);const w=(0,h.getLogger)("Chart.MiniChart"),D=new g.VolumeFormatter,T={value:"12M",type:"period-back"},P={top:.01,bottom:.01},I={chartType:"area",lineWidth:2,priceLineVisible:!1,crosshairMarkerVisible:!1,lastValueVisible:!1,scaleMargins:P},M={lineWidth:2,priceLineVisible:!1,crosshairMarkerVisible:!1,lastValueVisible:!1,scaleMargins:P},k={priceLineVisible:!1,lastValueVisible:!1,scaleMargins:P},R={priceLineVisible:!1,lastValueVisible:!1,scaleMargins:P},E={scaleMargins:P},O={scaleMargins:{top:.8,bottom:0},priceScaleId:"overlay",upColor:(0,m.applyTransparency)(n.colorsPalette["color-minty-green-400"],50),downColor:(0,m.applyTransparency)("#ef5350",50),visible:!1,lastValueVisible:!1,priceLineVisible:!1},L={visible:!1,color:n.colorsPalette["color-tv-blue-500"],lineWidth:1,length:9,lastValueVisible:!1,priceLineVisible:!1},F={spinner:{visible:!1,width:4,color:n.colorsPalette["color-brand"]},fade:{visible:!1},clearDataOnSymbolChange:!0,clearDataOnTimeframeChange:!0},N={onFirstData:null,description:"",showDescription:!0,valuesTracking:"0",timeframe:{visible:!1,value:T.value},chartOptions:{minWidth:0,minHeight:0,chart:{grid:{horzLines:{color:"rgba(120, 123, 134, 0.1)",visible:!1},vertLines:{
color:"#ffffff",visible:!1}},crosshair:{horzLine:{visible:!1,style:3,width:1,labelVisible:!1},vertLine:{visible:!1,style:3,width:1,labelVisible:!1}},layout:{fontFamily:"Trebuchet MS",fontSize:10,textColor:"#83888D",background:{type:s.ColorType.Solid,color:"transparent"}},watermark:{visible:!1,color:"#83888D",fontSize:12},rightPriceScale:{visible:!0,borderVisible:!1,entireTextOnly:!0,mode:s.PriceScaleMode.Normal},leftPriceScale:{visible:!1,borderVisible:!1,entireTextOnly:!0,mode:s.PriceScaleMode.Normal},timeScale:{borderVisible:!1,timeVisible:!0,secondsVisible:!1,lockVisibleTimeRangeOnResize:!0},handleScale:!1,handleScroll:!1},series:I,volume:O,ma:L,loading:F}},x={"1y":{value:"12M",type:"period-back"},"5y":{value:"60M",type:"period-back"},max:{value:"ALL",type:"period-back"}};const V=(0,o.default)(m.resetTransparency);function B(e,t,i,r){const o={};switch(i){case s.TickMarkType.Year:o.year="numeric";break;case s.TickMarkType.Month:o.month="short";break;case s.TickMarkType.DayOfMonth:o.day="numeric";break;case s.TickMarkType.Time:o.hour12="12-hours"===e,o.hour="2-digit",o.minute="2-digit";break;case s.TickMarkType.TimeWithSeconds:o.hour12="12-hours"===e,o.hour="2-digit",o.minute="2-digit",o.second="2-digit"}const a=new Date(1e3*t);return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()).toLocaleString(r,o)}window.lightweightMiniChartInstances=window.lightweightMiniChartInstances||{};const A=window.lightweightMiniChartInstances;let U=0;class W{constructor(e,t,i,o){var a,n,l,h,c,u;this._isDestroyed=!1,this._elTimeframe=null,this._timeframeView=null,this._studyPlots=[],this._tickmarks=new Map,this._chartSession=null,this._connectCallback=null,this._connected=!1,this._loadErrorTimeout=null,this._isLoading=!1,this._spinner=null,this._floatingTooltip=null,this._onCrosshairMoveBound=null,this._seriesUpDownColors=null,this._isDWMResolution=!1,this._updateTimerId=null,this._width=new y.WatchedValue(0),this._height=new y.WatchedValue(0),this._status=new y.WatchedValue("loading"),this.resizeByContainer=()=>{const e=this.container().clientHeight,t=this.container().clientWidth;this._widget.options().autoSize||this._widget.applyOptions({height:e,width:t}),this._mainPlot.fitContent(),this._width.setValue(t),this._height.setValue(e)},this._onPlotStatusChanged=()=>{const e=this._mainPlot.status().value(),t=this._studyPlots.every((e=>0!==e.status().value()));switch(e){case 3:t&&this._onPlotsDataReady();break;case 2:this._onMainPlotDataError();break;case 1:this._onMainPlotSymbolResolvingError()}if(this._options.chartOptions.loading.fade.visible)switch(e){case 0:this._innerContainer.classList.add(C.fade);break;case 2:case 1:case 3:this._innerContainer.classList.remove(C.fade)}this._updateStatus()},this._onChartSessionIsConnectedChanged=e=>{var t;e?(this._connected=!0,"function"==typeof this._connectCallback&&this._connectCallback(),null===(t=this._chartSession)||void 0===t||t.switchTimezone("Etc/UTC"),this._requestData()):(this._connected=!1,
this._mainPlot.disconnect(),this._studyPlots.forEach((e=>e.disconnect())))},this._timeFrameOptions=null!==(n=null===(a=null==o?void 0:o.timeframe)||void 0===a?void 0:a.options)&&void 0!==n?n:(0,d.getMiniTimeFrameOptions)(),this._options=(0,r.default)({},N,o),this._container=t,this._innerContainer=t.ownerDocument.createElement("div"),this._innerContainer.style.position="relative",this._innerContainer.style.direction="ltr",t.appendChild(this._innerContainer);const m=(null===(l=this._options.chartOptions)||void 0===l?void 0:l.chart.autoSize)?null===(h=null==o?void 0:o.chartOptions)||void 0===h?void 0:h.minHeight:void 0,_=(null===(c=this._options.chartOptions)||void 0===c?void 0:c.chart.autoSize)?t.clientWidth:void 0;this._widget=(0,s.createChart)(this._innerContainer,{...null===(u=this._options.chartOptions)||void 0===u?void 0:u.chart,height:m,width:_}),this._tooltipContainer=i,this._timeframe=new S.WatchedObject({type:"period-back",value:this._options.timeframe.value}),this._mainPlot=this._createMainPlot(e),this.setTimeframe(this._timeframe.value(),!0),this.connect(),this._createFloatingTooltip(),window.addEventListener("resize",this.resizeByContainer),this._updateSeriesUpDownColors(),this.resizeByContainer(),U+=1,this._innerContainer.dataset.lightweightMiniChartId=`${U}`,A[this._innerContainer.dataset.lightweightMiniChartId]=this}container(){return this._container}getChartContainer(){var e,t,i,s,r;return null!==(r=null===(s=null===(i=null===(t=null===(e=this._container.getElementsByTagName("div").item(0))||void 0===e?void 0:e.getElementsByTagName("table").item(0))||void 0===t?void 0:t.getElementsByTagName("tr").item(0))||void 0===i?void 0:i.getElementsByTagName("td").item(1))||void 0===s?void 0:s.getElementsByTagName("div").item(0))&&void 0!==r?r:null}width(){return this._width.readonly()}height(){return this._height.readonly()}status(){return this._status.readonly()}seriesDataSource(){return this._mainPlot.seriesDataSource()}supportRealtimeUpdates(){return Boolean(this._options.doNotDisconnectOnDataReady)}connect(e){"function"==typeof e&&(this._connectCallback=e),this._clearReconnectionTimeout(),this.connected()||(this._showLoading(),this._mainPlot.clearData(),this._studyPlots.forEach((e=>e.clearData())),this._chartSession||(this._chartSession=new c.ChartSession(window.ChartApiInstance,!0)),this._chartSession.isConnected().subscribe(this._onChartSessionIsConnectedChanged),this._chartSession.criticalError().subscribe(this,this._onChartSessionCriticalError),this._chartSession.connect(this._onData.bind(this)),this._clearLoadErrorTimeout(),this._loadErrorTimeout=setTimeout((()=>{this.showMessage(l.t(null,void 0,i(516817))),"function"==typeof this._options.onFirstData&&(this._options.onFirstData(),this._options.onFirstData=null)}),15e3))}disconnect(){if(this.connected()){if(this._studyPlots.forEach((e=>e.disconnect())),this._mainPlot.disconnect(),this._chartSession){const e=this._chartSession;e.criticalError().unsubscribe(this,this._onChartSessionCriticalError),
e.isConnected().unsubscribe(this._onChartSessionIsConnectedChanged),e.isConnected().value()&&e.disconnect()}this._connected=!1,this._clearLoadErrorTimeout()}}connected(){return Boolean(this._connected&&this._chartSession&&this._chartSession.isConnected().value())}setTimeframe(e,t,i){const s=this._timeframe.value();let r=e;const o=x[r.value];void 0!==o&&(r=o);const a=this._timeframeIsAvailable(r)?r:T;this._timeframe.setValue(a),this._activeRange=this._timeframe.value().value,this._timeframeView&&this._options.timeframe.visible&&this._timeframeView.update({activeRange:this._activeRange}),(!t&&s!==this._timeframe.value()||i)&&this._requestDataOnTimeframeChange()}chartSession(){return(0,a.ensureNotNull)(this._chartSession)}widget(){return this._widget}timeframe(){return this._timeframe.readonly()}setTimeFrameOptions(e,t){if(e===this._timeFrameOptions)return;const i=this.resolution();this._timeFrameOptions=e,t?this.setTimeframe(t):this.resolution()!==i&&this._requestDataOnTimeframeChange(),this._initTimeframesRenderer()}timeFrameOptions(){return this._timeFrameOptions}resolution(){const e=this._timeFrameOptions.find((e=>e.value.value===this.timeframe().value().value));return(0,a.ensureDefined)(null==e?void 0:e.targetResolution)}changeSymbol(e,t){void 0!==t&&this._updateSeriesOptions(t),this._options.chartOptions.loading.clearDataOnSymbolChange&&(this._mainPlot.clearData(),this._mainPlot.deleteView(),this._studyPlots.forEach((e=>e.clearData())),this._studyPlots.forEach((e=>e.deleteView()))),this._mainPlot.setSymbol(e,this._options.chartOptions.series),this._mainPlot.requestData(),this._studyPlots.forEach((e=>e.requestData())),this.connect()}updateSeriesOptions(e){this._updateSeriesOptions(e),this._updateSeriesUpDownColors(),this._mainPlot.updateSeriesOptions(e)}getSeriesOptions(){return this._mainPlot.currentSeriesOptions()}showMessage(e){this._hideLoading(),this._mainPlot.deleteView(),this._studyPlots.forEach((e=>e.deleteView())),this._widget.applyOptions({watermark:{visible:!0,text:e}})}hideMessage(){this._widget.applyOptions({watermark:{visible:!1}})}from(){const e=this._timeFrameOptions.find((e=>e.value.value===this.timeframe().value().value));return[null==e?void 0:e.from]}enable(e){this.connect(e)}disable(){this.disconnect()}destroy(){var e,t;window.removeEventListener("resize",this.resizeByContainer),this.disconnect(),this._destroyFloatingTooltip(),this._widget.remove(),this._mainPlot.symbolResolved().unsubscribeAll(null),this._mainPlot.timeFrameInvalidated().unsubscribeAll(this),this._mainPlot.destroy(),this._studyPlots.forEach((e=>e.destroy())),null===(e=this._timeframeView)||void 0===e||e.destroy(),null===(t=this._chartSession)||void 0===t||t.destroy(),delete A[this._innerContainer.dataset.lightweightMiniChartId],this._isDestroyed=!0}updateAvailableTimeframes(){this._mainPlot.symbolInfo()?(this._timeframeView&&this._options.timeframe.visible&&this._timeframeView.update({ranges:this._getAvailableTimeFrames()}),
this.setTimeframe(this._timeframe.value())):w.logWarn("Updating available resolutions without full symbol info")}mainPlot(){return this._mainPlot}hasStudyPlots(){return this._studyPlots.length>0}studyPlots(){return this._studyPlots}addStudyPlot(e){return this._studyPlots.push(e),e.status().subscribe(this._onPlotStatusChanged),this.connected()?e.requestData():this.connect(),e.forcePercentageMode()&&this._mainPlot.switchToPercentageScaleMode(),this._updateStatus(),{noData:e.noData(),status:e.status(),remove:()=>{this._removeStudyPlot(e)},symbol:()=>e.symbol(),options:()=>e.currentSeriesOptions()}}indexToTime(e){var t,i;return null!==(i=null===(t=this._tickmarks.get(e))||void 0===t?void 0:t.time)&&void 0!==i?i:null}subscribeCrosshairMove(e){this.unsubscribeCrosshairMove(),this._onCrosshairMoveBound=t=>{e(this._onCrosshairMoveHandler(t))},this._widget.subscribeCrosshairMove(this._onCrosshairMoveBound)}unsubscribeCrosshairMove(){this._onCrosshairMoveBound&&this._widget.unsubscribeCrosshairMove(this._onCrosshairMoveBound)}updateChartRightMarginAccordingToTitles(){const e=[this.mainPlot(),...this._studyPlots].map((e=>e.currentSeriesOptions().title)).map((e=>{var t;return null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0})),t=Math.max(...e);this.mainPlot().updateHorzMargins({rightPx:12*t}),this.mainPlot().fitContent()}activeRange(){return this._activeRange}_getChartPlotClass(){return f.MiniChartPlot}_createMainPlot(e){const t=new(this._getChartPlotClass())(this,this._options.chartOptions.series,this._options.chartOptions.volume,(()=>this._studyPlots),this._options.mainPlotOptions);return t.setSymbol(e),t.symbolResolved().subscribe(this,this._onSymbolResolved),t.timeFrameInvalidated().subscribe(this,this._onTimeFrameInvalidated),t.status().subscribe(this._onPlotStatusChanged),t}_removeStudyPlot(e){const t=this._studyPlots.indexOf(e);(0,a.assert)(-1!==t),this._studyPlots.splice(t,1),e.status().unsubscribe(this._onPlotStatusChanged),e.deleteView(),e.clearData(),e.destroy(),this._studyPlots.every((e=>!e.forcePercentageMode()))&&this._mainPlot.restoreOriginalScaleMode(),this._updateStatus()}_updateSeriesUpDownColors(){var e,t;const i=this._options.chartOptions.series;switch(i.chartType){case"candlesticks":this._seriesUpDownColors={up:null!==(e=i.borderUpColor)&&void 0!==e?e:i.upColor,down:null!==(t=i.borderDownColor)&&void 0!==t?t:i.downColor};break;case"bars":this._seriesUpDownColors={up:i.upColor,down:i.downColor};break;default:this._seriesUpDownColors=null}}_updateSeriesOptions(e){this._options.chartOptions.series=function(e){var t;let i;switch(null!==(t=e.chartType)&&void 0!==t?t:"area"){case"bars":i=k;break;case"candlesticks":i=R;break;case"area":i=I;break;case"line":i=M;break;case"histogram":i=E}return(0,r.default)({},i,e)}(e)}_onPlotsDataReady(){"function"==typeof this._options.onFirstData&&(this._options.onFirstData(),this._options.onFirstData=null),this._hideLoading(),this.hideMessage(),this._clearLoadErrorTimeout(),this._options.doNotDisconnectOnDataReady||this.disconnect(),this._createReconnectionTimeout()}
_onMainPlotDataError(){this._hideLoading(),this.showMessage(l.t(null,void 0,i(482751))),this._clearLoadErrorTimeout(),this.disconnect()}_onMainPlotSymbolResolvingError(){this._hideLoading(),this.showMessage(l.t(null,void 0,i(516817))),this._clearLoadErrorTimeout(),this.disconnect()}_createReconnectionTimeout(){if(this._options.doNotDisconnectOnDataReady)return;const e=this._options.updateTimeout;void 0!==e&&e>0&&(this._updateTimerId=setTimeout((()=>{this._updateTimerId=null,this.connected()?this._requestData():this.connect()}),e))}_clearReconnectionTimeout(){null!==this._updateTimerId&&(clearInterval(this._updateTimerId),this._updateTimerId=null)}_clearLoadErrorTimeout(){this._loadErrorTimeout&&(clearTimeout(this._loadErrorTimeout),this._loadErrorTimeout=null)}_onCrosshairMoveHandler(e){var t;const{point:s,time:r,seriesData:o}=e,n=this._mainPlot.series(),h=this._mainPlot.volume();if(void 0===s||void 0===r)return;const c=o.get(n);if(void 0===c)return;let d;const u=[],_=n.priceFormatter();if("Area"===n.seriesType()||"Line"===n.seriesType()){d="line";const{value:e,color:i}=c,s=this._mainPlot.currentSeriesOptions();let r;"line"===s.chartType?r=i||s.color:"area"===s.chartType&&(r=s.lineColor),u.push({title:(null===(t=this._mainPlot.symbolInfo())||void 0===t?void 0:t.name)||"",value:_.format(e),color:r})}else{d="ohlc";const{open:e,high:t,low:s,close:r}=c,o=function(e,t){const i=e?(0,a.ensureNotNull)(t).up:(0,a.ensureNotNull)(t).down;return V(i)}(r>=e,this._seriesUpDownColors);[[l.t(null,{context:"in_legend"},i(978155)),_.format(e)],[l.t(null,{context:"in_legend"},i(556723)),_.format(t)],[l.t(null,{context:"in_legend"},i(304292)),_.format(s)],[l.t(null,{context:"in_legend"},i(977297)),_.format(r)]].forEach((([e,t])=>{u.push({value:t,title:e,color:o})}))}const p=h&&o.get(h);if(p){const{value:e,color:t}=p;u.push({title:l.t(null,{context:"in_legend"},i(973010)),value:D.format(e),color:t&&(0,m.resetTransparency)(t)})}this._studyPlots.forEach((t=>{u.push(...t.getLegendData(e))}));const g=new Date(1e3*r);let v=this._tooltipDateTimeFormatter.format(g);return this._isDWMResolution||(v+=" "+function(e){if(0===e)return"UTC";const t=Math.abs(e),i=Math.floor(t/60),s=t-60*i;return`UTC${Math.sign(e)<=0?"+":"-"}${i}${s>0?`:${s}`:""}`}(g.getTimezoneOffset())),{point:s,time:v,prices:u,type:d}}_initTimeframesRenderer(){var e,t,s;if(!this._options.timeframe.visible)return;{const i=this._timeFrameOptions.length<2;if(null===(e=this._timeframeView)||void 0===e||e.update({hidden:i}),null===(s=null!==(t=this._elTimeframe)&&void 0!==t?t:this._options.timeframe.container)||void 0===s||s.classList.toggle(C.hidden,i),i)return}if(this._elTimeframe)return;this._options.timeframe.container?this._elTimeframe=this._options.timeframe.container:(this._elTimeframe=document.createElement("div"),this._container.appendChild(this._elTimeframe));const r=(e,t)=>{const i=this._timeFrameOptions.length<2,s=(0,a.ensureNotNull)(this._elTimeframe);s.classList.toggle(C.hidden,i),this._timeframeView=new e.TimeFrameViewRenderer(s,{name:"minichart_timeframe",
activeRange:this._activeRange,ranges:this._getAvailableTimeFrames(),onSelectRange:e=>{this.setTimeframe({value:e,type:"period-back"})},size:this._options.timeframe.size,theme:t,hidden:i})};Promise.all([i.e(72639),i.e(89053),i.e(50690),i.e(31891)]).then(i.bind(i,358450)).then((e=>{(this._options.timeframe.getTheme||(()=>Promise.resolve(void 0)))().then((t=>r(e,t)))}))}_getAvailableTimeFrames(){const e=[];for(const t of this._timeFrameOptions)this._timeframeIsAvailable(t.value)&&e.push({value:t.value.value,text:t.text,description:t.description});return e}_timeframeIsAvailable(e){const t=this._timeFrameOptions.find((t=>t.value.value===e.value));if(!t)return!1;const i=this.mainPlot().symbolInfo();if(!i||i.pro_name!==this._mainPlot.symbol())return!0;if(i.has_intraday)return!0;return!u.Interval.parse(t.targetResolution).isIntraday()}_onChartSessionCriticalError(){this._connected=!1}_requestData(){this._clearReconnectionTimeout();const e=u.Interval.parse(this.resolution());let t,i;this._isDWMResolution=e.isDWM(),this._widget.timeScale().applyOptions({timeVisible:!this._isDWMResolution,secondsVisible:e.isSeconds()});const{dateFormat:s="dd MMM 'yy",timeHoursFormat:r="24-hours"}=this._options.chartOptions;this._isDWMResolution?t=i=new p.DateFormatter(s):(t=new v.DateTimeFormatter({dateFormat:s,timeFormat:(0,b.getTimeFormatForInterval)(e,r)}),i=new v.DateTimeFormatter({dateFormat:s,timeFormat:(0,b.getTimeFormatForInterval)(e,r),dateTimeSeparator:"\n"})),this._tooltipDateTimeFormatter=i,this._widget.applyOptions({localization:{timeFormatter:e=>t.format(new Date(1e3*e))},timeScale:{tickMarkFormatter:B.bind(null,r)}}),this._mainPlot.requestData(),this._studyPlots.forEach((e=>e.requestData())),this._widget.applyOptions({timeScale:{timeVisible:!u.Interval.parse(this._mainPlot.resolution()).isDWM()}})}_onData(e){switch(e.method){case"timescale_update":{const t=e.params;if(t.clear){this._tickmarks.clear(),this._mainPlot.clearSourceData();for(const e of this._studyPlots)e.clearSourceData()}if(t.index_diff.length>0){this._mainPlot.moveSourceData(t.index_diff);for(const e of this._studyPlots)e.moveSourceData(t.index_diff)}const i=t.marks;for(const e of i)this._tickmarks.set(e.index,e);break}}}_onSymbolResolved(){this.updateAvailableTimeframes(),this._initTimeframesRenderer()}_onTimeFrameInvalidated(){var e;this._activeRange=void 0,null===(e=this._timeframeView)||void 0===e||e.update({activeRange:void 0})}_showLoading(){if(this._isLoading)return;this.hideMessage();const e=this._options.chartOptions.loading;e.spinner.visible&&(null===this._spinner&&(this._spinner=new _.Spinner("mini").setStyle({color:e.spinner.color,width:e.spinner.width.toString(),zIndex:"10"})),this._spinner.spin(this._innerContainer)),e.fade.visible&&this._innerContainer.classList.add(C.fade),this._isLoading=!0}_hideLoading(){this._isLoading&&(this._spinner&&this._spinner.stop(),this._isLoading=!1)}_createFloatingTooltip(){const e=this._options.valuesTracking;if("3"===e||"0"===e)return;if(this._tooltipContainer){
const{position:e}=window.getComputedStyle(this._tooltipContainer),t=["relative","fixed","absolute"];t.includes(e)||w.logWarn("Container position property must be: "+t.join(", "))}const t=async()=>{var e;const t=await Promise.all([i.e(72786),i.e(50690),i.e(10748)]).then(i.bind(i,667704));this._isDestroyed||(this._floatingTooltip=new t.FloatingPriceTimeTooltipRenderer(null!==(e=this._tooltipContainer)&&void 0!==e?e:void 0,this._innerContainer,C.floatingTooltip))};let s;this.subscribeCrosshairMove((i=>{var r;let o;if(i){const{point:t,...s}=i;o={...s,cursorPosition:{x:this._widget.priceScale("left").width()+t.x,y:t.y},lineColor:"2"===e?null===(r=s.prices[0])||void 0===r?void 0:r.color:void 0}}null===this._floatingTooltip?(s=s||t(),s.then((()=>{var e;return null===(e=this._floatingTooltip)||void 0===e?void 0:e.update(o)}))):this._floatingTooltip.update(o)}))}_destroyFloatingTooltip(){this._floatingTooltip&&(this._floatingTooltip.destroy(),this.unsubscribeCrosshairMove(),this._floatingTooltip=null)}_requestDataOnTimeframeChange(){this._options.chartOptions.loading.clearDataOnTimeframeChange&&(this.mainPlot().clearData(),this.mainPlot().deleteView(),this._studyPlots.forEach((e=>e.clearData())),this._studyPlots.forEach((e=>e.deleteView()))),this.connected()?this._requestData():this.connect()}_updateStatus(){const e=[this._mainPlot.status().value(),...this._studyPlots.map((e=>e.status().value()))],t=e.every((e=>0!==e))?3===e[0]?"ready":"error":"loading";this._status.setValue(t)}}},607436:(e,t,i)=>{"use strict";i.d(t,{DEFAULT_SIZE:()=>s.DEFAULT_SIZE,spinnerSizeMap:()=>s.spinnerSizeMap});var s=i(685023)},17966:(e,t,i)=>{"use strict";i.d(t,{getCircleLogoAnyHtml:()=>o});var s=i(562840),r=i(315723);function o(e){const{logoUrls:t,...i}=e;return 1===t.length?(0,s.getCircleLogoHtml)({logoUrl:t[0],...i}):2===t.length?(0,r.getCircleLogoPairHtml)({primaryLogoUrl:t[0],secondaryLogoUrl:t[1],...i}):(0,s.getCircleLogoHtml)({logoUrl:void 0,...i})}},315723:(e,t,i)=>{"use strict";i.d(t,{getCircleLogoPairHtml:()=>r});var s=i(439378);i(882112);function r(e){const{primaryLogoUrl:t,secondaryLogoUrl:i,size:r,className:a}=e;return`<span class="${(0,s.getBlockStyleClasses)(r,a)}">\n\t\t\t${o({logoUrl:i,size:r})}\n\t\t\t${o({logoUrl:t,size:r})}\n\t\t</span>`}function o(e){const{logoUrl:t,size:i}=e,r=(0,s.getLogoStyleClasses)(i,Boolean(t));return void 0===t?`<span class="${r}"></span>`:`<img class="${r}" src="${t}" alt="" />`}},439378:(e,t,i)=>{"use strict";i.d(t,{getBlockStyleClasses:()=>r,getLogoStyleClasses:()=>o});var s=i(497754);function r(e,t){return s("tv-circle-logo-pair",`tv-circle-logo-pair--${e}`,t)}function o(e,t){return s("tv-circle-logo-pair__logo",`tv-circle-logo-pair__logo--${e}`,!t&&"tv-circle-logo-pair__logo-empty")}},562840:(e,t,i)=>{"use strict";i.d(t,{getCircleLogoHtml:()=>r});var s=i(783036);i(645300);function r(e){const t=(0,s.getStyleClasses)(e.size,e.className);return(0,s.isCircleLogoWithUrlProps)(e)?`<img class="${t}" src="${e.logoUrl}" alt="">`:`<span class="${t}">${e.placeholderLetter||""}</span>`}},986738:(e,t,i)=>{
"use strict";i.d(t,{ChartSession:()=>a});var s=i(707957),r=i(558603),o=i(389137);class a extends r.Session{constructor(e,t=!1){super(e,"cs",!1),this._sessionDisabled=!1,this._handler=null,this._criticalError=new s.Delegate,this._symbolResolveMap=new Map,this._disableStatistics=t}destroy(){this._criticalError.destroy(),this._handler=null,this._symbolResolveMap.clear(),super.destroy()}serverTimeOffset(){return this._getChartApi().serverTimeOffset()}serverTime(){return this._getChartApi().serverTime()}switchTimezone(e){return this._getChartApi().switchTimezone(this.sessionId(),e)}defaultResolutions(){return this._getChartApi().defaultResolutions()}availableCurrencies(){return this._getChartApi().availableCurrencies()}availableUnits(){return this._getChartApi().availableUnits()}availablePriceSources(e){return this._getChartApi().availablePriceSources(e)}resolveSymbol(e,t,i){if(this._symbolResolveMap.has(t)){const[e,s]=this._symbolResolveMap.get(t);return Array.isArray(s)?s.push(i):s.then(i),e}{const s=[i];return this._getChartApi().resolveSymbol(this.sessionId(),e,t,(i=>{"symbol_error"===i.method?this._symbolResolveMap.delete(t):this._symbolResolveMap.set(t,[e,Promise.resolve(i)]),s.forEach((e=>e(i)))})),this._symbolResolveMap.set(t,[e,s]),e}}requestFirstBarTime(e,t,i){return this._getChartApi().requestFirstBarTime(this.sessionId(),e,t,i)}createSeries(e,t,i,s,r,o,a){return this._getChartApi().createSeries(this.sessionId(),e,t,i,s,r,o,a)}modifySeries(e,t,i,s,r,o,a){return this._getChartApi().modifySeries(this.sessionId(),e,t,i,s,r,o,a)}removeSeries(e){return!!this.isConnected().value()&&this._getChartApi().removeSeries(this.sessionId(),e)}requestMoreData(e,t,i){return"number"==typeof e?this._getChartApi().requestMoreData(this.sessionId(),e):this._getChartApi().requestMoreData(this.sessionId(),e,t,i)}requestMoreTickmarks(e,t,i){return(0,o.isNumber)(e)?this._getChartApi().requestMoreTickmarks(this.sessionId(),e):this._getChartApi().requestMoreTickmarks(this.sessionId(),e,t,i)}requestMetadata(e,t){this._getChartApi().requestMetadata(this.sessionId(),e,t)}canCreateStudy(e){return this._getChartApi().canCreateStudy(e)}getStudyCounter(){return this._getChartApi().getStudyCounter()}createStudy(e,t,i,s,r,o,a){return this._getChartApi().createStudy(this.sessionId(),e,t,i,s,r,o,a)}rebindStudy(e,t,i,s,r,o,a){return this._getChartApi().rebindStudy(this.sessionId(),e,t,i,s,r,o,a)}modifyStudy(e,t,i,s,r){return this._getChartApi().modifyStudy(this.sessionId(),e,t,i,s,r)}removeStudy(e,t){return this._getChartApi().removeStudy(this.sessionId(),e,t)}createPointset(e,t,i,s,r,o){return this._getChartApi().createPointset(this.sessionId(),e,t,i,s,r,o)}modifyPointset(e,t,i,s){return this._getChartApi().modifyPointset(this.sessionId(),e,t,i,s)}removePointset(e){return this._getChartApi().removePointset(this.sessionId(),e)}setVisibleTimeRange(e,t,i,s,r,o){0}criticalError(){return this._criticalError}connect(e=null){null!==e&&(this._handler=e),this._symbolResolveMap.clear(),super.connect()}setHandler(e){this._handler=e}connected(){
return this.isConnected().value()&&!this._sessionDisabled}disable(){this._sessionDisabled=!0}chartApi(){return this._getChartApi()}_sendCreateSession(){Object.keys(this).forEach((e=>{/^(s|st|symbol_)\d+$/.test(e)&&delete this[e]})),this._getChartApi().chartCreateSession(this.sessionId(),this._disableStatistics)}_sendRemoveSession(){this._getChartApi().chartDeleteSession(this.sessionId())}_onMessage(e){this._handler&&this._handler(e)}_onCriticalError(e,t){this._criticalError.fire(e,t),super._onCriticalError(e,t)}}},401580:(e,t,i)=>{"use strict";i.d(t,{WatchedValue:()=>l});var s=i(428123),r=i(194582),o=i(805377);const a=(0,r.getLogger)("Common.WatchedValue");function n(e){a.logError(`${e&&(e.stack||e.message)}`)}class l{constructor(...e){this._listeners=[],e.length>0&&(this._value=e[0])}destroy(){this.unsubscribe()}value(){return this._owner?this._owner._value:this._value}setValue(e,t){const i=this._owner?this._owner:this;if("function"==typeof i.hook&&(e=i.hook(e)),i.writeLock)return;const s=i._value===e||Number.isNaN(i._value)&&Number.isNaN(e);if(!t&&s&&i.hasOwnProperty("_value"))return;i._value=e;const r=i._listeners.slice();let o=0;for(let t=0;t<r.length;t++){r[t].once&&(i._listeners.splice(t-o,1),o++);try{r[t].cb(e)}catch(e){n(e)}}}deleteValue(){this.setValue(void 0)}subscribe(e,t){if("function"!=typeof e)throw new TypeError("callback must be a function");const i=!!t&&!!t.once,s=!!t&&!!t.callWithLast,r=this._owner?this._owner:this;if(s&&r.hasOwnProperty("_value")){try{e(r._value)}catch(e){n(e)}if(i)return}r._listeners.push({cb:e,owner:this,once:!!t&&!!t.once})}unsubscribe(e){const t=this._owner?this._owner:this;void 0===e&&(e=null);const i=t._listeners;for(let s=i.length;s--;)i[s].owner!==this&&t!==this||i[s].cb!==e&&null!==e||i.splice(s,1)}readonly(){if(this._readonlyInstance)return this._readonlyInstance;const e={subscribe:this.subscribe.bind(this),unsubscribe:this.unsubscribe.bind(this),value:this.value.bind(this),when:this.when.bind(this),ownership:this.ownership.bind(this),spawnOwnership:this.spawnOwnership.bind(this),weakReference:this.weakReference.bind(this),spawn:e=>this.spawn(e).readonly(),destroy:this.destroy.bind(this)};return this._readonlyInstance=e,e}spawn(e){return new h(this._owner||this,e)}when(e){(0,o.callWhen)(this,(e=>Boolean(e)),(()=>{try{e(this.value())}catch(e){n(e)}}))}assertNoSubscriptions(){0}ownership(){return(0,s.ownership)(this)}spawnOwnership(){return(0,s.ownership)(this.spawn())}weakReference(){return(0,s.weakReference)(this)}}class h extends l{constructor(e,t){super(),delete this._listeners,this._owner=e,this._onDestroy=t}destroy(){var e;try{null===(e=this._onDestroy)||void 0===e||e.call(this)}catch(e){n(e)}super.destroy()}readonly(){return super.readonly()}}},938550:(e,t,i)=>{"use strict";i.d(t,{WatchedObject:()=>a});var s=i(401580),r=i(389137);function o(e,t){return(0,r.deepEquals)(e,t)[0]}class a extends s.WatchedValue{constructor(e,t=o){super(e),this._comparator=t}setValue(e,t){!1===this._comparator(this.value(),e)&&super.setValue(e,t)}}},157954:(e,t,i)=>{"use strict";i.d(t,{
DateFormatter:()=>o});var s=i(551775),r=i(958067);class o{constructor(e="yyyy-MM-dd",t=!1){this._dateFormatFunc=t?(0,r.getDateFormatWithWeekday)(e):r.dateFormatFunctions[e]}format(e){return s.customFormatters&&s.customFormatters.dateFormatter?s.customFormatters.dateFormatter.format(e):this._dateFormatFunc(e,!1)}formatLocal(e){return s.customFormatters.dateFormatter?s.customFormatters.dateFormatter.formatLocal?s.customFormatters.dateFormatter.formatLocal(e):s.customFormatters.dateFormatter.format(e):this._dateFormatFunc(e,!0)}}},714688:(e,t,i)=>{"use strict";i.d(t,{DateTimeFormatter:()=>a});var s=i(716714),r=i(157954);const o={dateFormat:"yyyy-MM-dd",withWeekday:!1,timeFormat:s.hourMinuteSecondFormat,dateTimeSeparator:" "};class a{constructor(e={}){const t=Object.assign({},o,e);this._dateFormatter=new r.DateFormatter(t.dateFormat,t.withWeekday),this._timeFormatter=new s.TimeFormatter(t.timeFormat),this._separator=t.dateTimeSeparator}format(e){return`${this._dateFormatter.format(e)}${this._separator}${this._timeFormatter.format(e)}`}formatLocal(e){return`${this._dateFormatter.formatLocal(e)}${this._separator}${this._timeFormatter.formatLocal(e)}`}}},943994:(e,t,i)=>{"use strict";i.d(t,{PLACE_HOLDER:()=>a,VolumeFormatter:()=>n});var s=i(444372),r=i(182436),o=i(389137);const a="---";class n{constructor(e){this.type="volume",this._numericFormatter=new r.NumericFormatter,this._fractionalValues=void 0!==e&&e>0,this._precision=e}state(){return{precision:this._precision}}format(e,t){if(!(0,o.isNumber)(e))return a;let r="";return e<0?(r="−",e=-e):e>0&&t&&(r="+"),e>=1e100?s.t(null,void 0,i(343088)):(!this._fractionalValues||e>=995?e=Math.round(e):this._fractionalValues&&(e=+e.toFixed(this._precision)),e<995?r+this._formatNumber(e):e<999995?r+this._formatNumber(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),r+this._formatNumber(e/1e6)+"M"):e<999999999995?(e=1e6*Math.round(e/1e6),r+this._formatNumber(e/1e9)+"B"):(e=1e9*Math.round(e/1e9),r+this._formatNumber(e/1e12)+"T"))}parse(e){if("---"===e)return{error:"not a number",res:!1,value:NaN};const t={K:1e3,M:1e6,B:1e9,T:1e12},i=e.slice(-1);if(t.hasOwnProperty(i)){const s=this._numericFormatter.parse(e.slice(0,-1));return(0,o.isNumber)(s)?{res:!0,value:s*t[i]}:{error:"not a number",res:!1,value:NaN}}{const t=this._numericFormatter.parse(e);return(0,o.isNumber)(t)?{res:!0,value:t}:{error:"not a number",res:!1,value:NaN}}}static serialize(e){return e.state()}static deserialize(e){return new n(e.precision)}_formatNumber(e){if(this._fractionalValues&&0!==e){const t=14-Math.ceil(Math.log10(e)),i=Math.pow(10,t);e=Math.round(e*i)/i}return this._numericFormatter.format(e).replace(/(\.[1-9]*)0+$/,((e,t)=>t))}}},826989:(e,t,i)=>{"use strict";var s;i.d(t,{SymbolErrorPermissionDeniedReason:()=>s,invalidSymbol:()=>o,permissionDenied:()=>r}),function(e){e.Symbol="symbol",e.GroupPermission="group"}(s||(s={}));const r="permission denied",o="invalid symbol"},442410:(e,t,i)=>{"use strict";i.d(t,{SeriesDataEvents:()=>r});var s=i(707957);class r{constructor(){this._created=new s.Delegate,
this._modified=new s.Delegate,this._loading=new s.Delegate,this._completed=new s.Delegate,this._error=new s.Delegate,this._symbolError=new s.Delegate,this._symbolResolved=new s.Delegate,this._seriesError=new s.Delegate,this._symbolNotPermitted=new s.Delegate,this._symbolInvalid=new s.Delegate,this._symbolGroupNotPermitted=new s.Delegate,this._chartTypeNotPermitted=new s.Delegate,this._intradaySpreadNotPermitted=new s.Delegate,this._intradayExchangeNotPermitted=new s.Delegate,this._customIntervalNotPermitted=new s.Delegate,this._secondsIntervalNotPermitted=new s.Delegate,this._tickMarksRangeChanged=new s.Delegate,this._barReceived=new s.Delegate,this._seriesTimeFrame=new s.Delegate,this._dataUpdated=new s.Delegate}destroy(){this._created.destroy(),this._modified.destroy(),this._loading.destroy(),this._completed.destroy(),this._error.destroy(),this._symbolError.destroy(),this._symbolResolved.destroy(),this._seriesError.destroy(),this._symbolInvalid.destroy(),this._symbolNotPermitted.destroy(),this._symbolGroupNotPermitted.destroy(),this._chartTypeNotPermitted.destroy(),this._intradaySpreadNotPermitted.destroy(),this._intradayExchangeNotPermitted.destroy(),this._customIntervalNotPermitted.destroy(),this._secondsIntervalNotPermitted.destroy(),this._tickMarksRangeChanged.destroy(),this._barReceived.destroy(),this._seriesTimeFrame.destroy(),this._dataUpdated.destroy()}created(){return this._created}modified(){return this._modified}loading(){return this._loading}completed(){return this._completed}error(){return this._error}symbolError(){return this._symbolError}symbolResolved(){return this._symbolResolved}seriesError(){return this._seriesError}symbolInvalid(){return this._symbolInvalid}symbolNotPermitted(){return this._symbolNotPermitted}symbolGroupNotPermitted(){return this._symbolGroupNotPermitted}chartTypeNotPermitted(){return this._chartTypeNotPermitted}intradaySpreadNotPermitted(){return this._intradaySpreadNotPermitted}intradayExchangeNotPermitted(){return this._intradayExchangeNotPermitted}customIntervalNotPermitted(){return this._customIntervalNotPermitted}secondsIntervalNotPermitted(){return this._secondsIntervalNotPermitted}tickMarksRangeChanged(){return this._tickMarksRangeChanged}barReceived(){return this._barReceived}seriesTimeFrame(){return this._seriesTimeFrame}dataUpdated(){return this._dataUpdated}fireCompleted(e){this._completed.fire(e)}fireCreated(e){this._created.fire(e)}fireModified(){this._modified.fire()}fireLoading(e){this._loading.fire(e)}fireError(){this._error.fire()}fireSymbolError(e){this._symbolError.fire(e),this.fireError()}fireSymbolResolved(e){this._symbolResolved.fire(e)}fireSeriesError(e){this._seriesError.fire(e),this.fireError()}fireSymbolInvalid(){this._symbolInvalid.fire()}fireSymbolNotPermitted(e){this._symbolNotPermitted.fire(e)}fireSymbolGroupNotPermitted(e){this._symbolGroupNotPermitted.fire(e)}fireChartTypeNotPermitted(e){this._chartTypeNotPermitted.fire(e),this.fireError()}fireIntradaySpreadNotPermitted(){this._intradaySpreadNotPermitted.fire(),this.fireError()}
fireIntradayExchangeNotPermitted(){this._intradayExchangeNotPermitted.fire(),this.fireError()}fireCustomIntervalNotPermitted(e){this._customIntervalNotPermitted.fire(e),this.fireError()}fireSecondsIntervalNotPermitted(){this._secondsIntervalNotPermitted.fire(),this.fireError()}fireTickMarksRangeChanged(e){this._tickMarksRangeChanged.fire(e)}fireBarReceived(e){this._barReceived.fire(e)}fireSeriesTimeFrame(e,t,i,s,r){this._seriesTimeFrame.fire(e,t,i,s,r)}fireDataUpdated(e,t,i){this._dataUpdated.fire(e,t,i)}}},558603:(e,t,i)=>{"use strict";i.d(t,{Session:()=>l});var s=i(650151),r=i(401580),o=i(707957),a=i(541558);const n=(0,i(201089).getLogger)("ChartApi.AbstractSession");class l{constructor(e,t,i){this._isConnected=new r.WatchedValue(!1),this._state=0,this._isConnectForbidden=!1,this._sessionId="",this._sessionIdChanged=new o.Delegate,this._chartApi=e,this._sessionPrefix=t,this._shouldReconnectAfterCriticalError=i}destroy(){this._logNormal("Destroying session"),this._isConnected.unsubscribe(),this.disconnect(),this._sessionIdChanged.destroy(),delete this._chartApi,this._logNormal("Session has been destroyed")}isConnected(){return this._isConnected}sessionId(){return this._sessionId}onSessionIdChanged(){return this._sessionIdChanged}connect(){0===this._state&&((0,s.assert)(!this._isConnectForbidden,"Cannot call connect because it is forbidden at this moment"),this._setSessionId(`${this._sessionPrefix}_${(0,a.randomHash)()}`),this._logNormal("Connecting session - wait until transport stay connected"),this._state=1,this._chartApi.createSession(this._sessionId,this))}disconnect(){0!==this._state&&((0,s.assert)(""!==this._sessionId,"sessionId must not be invalid"),this._logNormal("Disconnecting session..."),this._forbidConnectWhile((()=>{this._chartApi.connected()&&this._sendRemoveSession(),this._processDestroyingOnServer()})))}onMessage(e){switch(e.method){case"connected":return void this._onChartApiConnected();case"disconnected":return void this._onChartApiDisconnected();case"critical_error":const t=String(e.params[0]),i=String(e.params[1]);return void this._onCriticalError(t,i)}this._onMessage(e)}_getChartApi(){return this._chartApi}_generateLogMessage(e){return`[${this._sessionId}] ${e}`}_onCriticalError(e,t){this._logError(`Critical error. Reason=${e}, info=${t}.`),this._forbidConnectWhile((()=>{this._processDestroyingOnServer()})),this._shouldReconnectAfterCriticalError?(this._logNormal("Reconnecting after critical error..."),this.connect()):this._logNormal("Reconnecting after critical error skipped")}_onChartApiConnected(){(0,s.assert)(1===this._state,"Session is not registered"),this._logNormal("Transport is connected. Creating session on the server"),this._sendCreateSession(),this._state=2,this._isConnected.setValue(!0)}_onChartApiDisconnected(){this._logNormal("Transport is disconnected. Reconnecting..."),this._forbidConnectWhile((()=>{this._processDestroyingOnServer()})),this.connect()}_setSessionId(e){const t=this._sessionId;this._logNormal(`Changing sessionId: old=${t}, new=${e}`),this._sessionId=e,
this._sessionIdChanged.fire(e,t)}_logNormal(e){n.logNormal(this._generateLogMessage(e))}_logError(e){n.logError(this._generateLogMessage(e))}_processDestroyingOnServer(){this._state=0,this._isConnected.setValue(!1),this._chartApi.removeSession(this._sessionId),this._setSessionId("")}_forbidConnectWhile(e){this._isConnectForbidden=!0,e(),this._isConnectForbidden=!1}}},133822:(e,t,i)=>{"use strict";i.d(t,{validateGraphicsCommands:()=>o});var s=i(130551),r=i(650151);function o(e){if(!(0,s.isObject)(e))throw new Error("Graphics commands should be wrapped in an object");if((0,s.hasProperty)(e,"create"),(0,s.hasProperty)(e,"erase")){const t=e.erase;(0,r.assert)(Array.isArray(t),"Collection of erase commands should be array");for(const e of t){if(!(0,s.isObject)(e)||!(0,s.hasProperty)(e,"action"))throw new Error("Command should be an object with 'action' property");(0,r.assert)("all"===e.action||"one"===e.action,"Erase command action should be 'all' or 'one'")}}return e}},732149:(e,t,i)=>{"use strict";i.d(t,{INVALID_TIME_POINT_INDEX:()=>s,UNPLOTTABLE_TIME_POINT_INDEX:()=>r});const s=-2e6,r=-1e6},603706:(e,t,i)=>{"use strict";i.d(t,{getTimeFrames:()=>o});var s=i(444372),r=i(146585);function o(){return{"1d":{text:s.t(null,void 0,i(932120)),value:{value:"1D",type:"period-back"},targetResolution:(0,r.stringAsResolution)("1"),description:(0,r.daysStringLiteral)(1)},"5d":{text:s.t(null,void 0,i(905486)),value:{value:"5D",type:"period-back"},targetResolution:(0,r.stringAsResolution)("5"),description:(0,r.daysStringLiteral)(5)},"1w":{text:s.t(null,void 0,i(234880)),value:{value:"7D",type:"period-back"},targetResolution:(0,r.stringAsResolution)("15"),description:(0,r.weeksStringLiteral)(1)},"1m":{text:s.t(null,void 0,i(460356)),value:{value:"1M",type:"period-back"},targetResolution:(0,r.stringAsResolution)("30"),description:(0,r.monthsStringLiteral)(1)},"3m":{text:s.t(null,void 0,i(440675)),value:{value:"3M",type:"period-back"},targetResolution:(0,r.stringAsResolution)("60"),description:(0,r.monthsStringLiteral)(3)},"6m":{text:s.t(null,void 0,i(281788)),value:{value:"6M",type:"period-back"},targetResolution:(0,r.stringAsResolution)("120"),description:(0,r.monthsStringLiteral)(6)},"12m":{text:s.t(null,void 0,i(254790)),value:{value:"12M",type:"period-back"},targetResolution:(0,r.stringAsResolution)("1D"),description:(0,r.yearsStringLiteral)(1)},"24m":{text:s.t(null,void 0,i(440956)),value:{value:"24M",type:"period-back"},targetResolution:(0,r.stringAsResolution)("1W"),description:(0,r.yearsStringLiteral)(2)},"36m":{text:s.t(null,void 0,i(996053)),value:{value:"36M",type:"period-back"},targetResolution:(0,r.stringAsResolution)("1W"),description:(0,r.yearsStringLiteral)(3)},"60m":{text:s.t(null,void 0,i(320013)),value:{value:"60M",type:"period-back"},targetResolution:(0,r.stringAsResolution)("1W"),description:(0,r.yearsStringLiteral)(5)},"120m":{text:s.t(null,void 0,i(377628)),value:{value:"120M",type:"period-back"},targetResolution:(0,r.stringAsResolution)("1M"),description:(0,r.yearsStringLiteral)(10)},ytd:{
text:s.t(null,void 0,i(989013)),value:{value:"YTD",type:"period-back"},targetResolution:(0,r.stringAsResolution)("1D"),description:s.t(null,void 0,i(388996))},all:{text:s.t(null,void 0,i(695271)),value:{value:"ALL",type:"period-back"},targetResolution:(0,r.stringAsResolution)("1M")},lastsession:{text:s.t(null,void 0,i(932120)),value:{value:"LASTSESSION",type:"period-back"},targetResolution:(0,r.stringAsResolution)("1"),description:(0,r.daysStringLiteral)(1)}}}},453290:(e,t,i)=>{"use strict";i.d(t,{getActualTimeFrame:()=>r});var s=i(603706);function r(e){const t=new Set(Object.values((0,s.getTimeFrames)()).map((e=>e.value.value)));if(t.has(e))return e;const i=e.toUpperCase();return t.has(i)?i:"12M"}},663261:(e,t,i)=>{"use strict";i.d(t,{handleTVLinksClick:()=>a});var s=i(439563),r=i(185515),o=i(691239);function a(){document.addEventListener("click",(e=>{const t=e.target.closest(":link");if(!(null==t?void 0:t.hostname)||!(0,o.isInternalHost)(t.hostname,"tradingview.com"))return;const i=t.dataset.targetType||null;!function(e,t){const i=function(){const e=window.initData.hashSettings;if(Object.keys(e).length>0)return(0,r.filterUtmInfo)(e);const t=new URLSearchParams(location.href);return{utm_campaign:t.get("utm_campaign")||void 0,utm_source:t.get("utm_source")||void 0}}(),o=function(e){var t;const i=(null===(t=location.ancestorOrigins)||void 0===t?void 0:t[0])||document.referrer;return e.utm_source||function(e){try{return new URL(e).host}catch(e){return""}}(i)}(i);!async function(e){var t;null===(t=await(0,s.getEmbedWidgetTracker)())||void 0===t||t.trackWidgetTVLinkClick(e)}({widget_type:n(i),domain:o,link:e,target_type:t})}(t.href,i)}))}function n(e){if(e.utm_campaign)return e.utm_campaign;const t=location.pathname;return t.includes("embed-widget")?t.split("/")[2]:t}}}]);